
<div id="add-overlay" style="display:none; width:100vw; height:100vh; top:0px; left:0px; position:absolute; background-color: #faebd7e6; z-index:99;">
    <div class="text-primary" style="    margin-top: 50vh;
    transform: translateY(-50%);
    width: 80vw;
    place-self: center;" role="status">
        <form method="post" accept-charset="UTF-8" enctype="multipart/form-data">
            {{ csrfInput() }}
            {{ actionInput('guest-entries/save') }}
            {{ hiddenInput('sectionId', 3) }} {# Assurez-vous que 12 est le bon ID #}
            {{ hiddenInput('enabled', '1') }}
            {# Assigner l'utilisateur courant comme admin ET inscrit initial #}

            <div class="mb-3">
                <input id="title11" type="hidden" name="title" class="form-control" required placeholder="Ex: Réunion Projet Alpha">
            </div>

            <div class="mb-3">
                <input id="obj11" type="hidden" name="fields[obj][]" class="form-control" required>
            </div>

            <div class="mb-4"> {# Marge un peu plus grande avant le bouton #}
                <label for="img" class="form-label">Image :</label>
                <input id="img" type="file" name="fields[img]" class="form-control" accept="image/*"> {# Accepter seulement les images #}
                <div class="form-text">Optionnel. Une image représentative.</div>
            </div>

            <button type="submit" class="btn btn-primary btn-lg d-inline-flex align-items-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-circle-fill me-2" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z"/>
                </svg>
                Ajouter l'image
            </button>
        </form>





        <button type="button" class="btn btn-secondary" onclick="document.getElementById('add-overlay').style.display='none';">
            Annuler
        </button>
    </div>
</div>

<script>    
    function addimg(id) {
        // 1. On sélectionne le calque de chargement grâce à son nouvel id
        const loadingOverlay = document.getElementById('add-overlay');

        // S'il n'existe pas, on arrête le script pour éviter des erreurs
        if (!loadingOverlay) {
            return;
        }
        loadingOverlay.style.display = 'block';

        document.getElementById('title11').value=id;
        document.getElementById('obj11').value=id;
        document.getElementById('img').value='';
    }
</script>